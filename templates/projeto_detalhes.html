{% extends '_layout.html' %}

{% block title %}Detalhes do Projeto - {{ page.projeto.nome }}{% endblock %}

{% block content %}

<div class="container">
    <!-- Título do Projeto -->
    <h1 class="my-4">{{ page.projeto.nome }}</h1>
    
    <!-- Informações do Projeto -->
    <p><strong>Descrição:</strong> {{ page.projeto.descricao }}</p>
    <p><strong>Responsável:</strong> {{ page.projeto.responsavel_id }}</p>
    <!-- Botão para Editar Projeto -->
    <a href="{{ url_for('editar_projeto', projeto_id=page.projeto.id) }}" class="btn btn-primary my-3">Editar Projeto</a>

    <!-- Lista de Tarefas -->
    <h3 class="mt-4">Lista de Tarefas</h3>

    <!-- Tarefas Pendentes -->
    <h4 class="mt-3">Tarefas Pendentes</h4>
    <ul class="list-group">
        {% for tarefa in page.pendentes %}
        <li class="list-group-item">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <strong>{{ tarefa.nome }}</strong> 
                    <span class="text-muted">(Prazo: {{ tarefa.prazo }})</span>
                    <p>{{ tarefa.descricao }}</p>
                </div>
                <!-- Botão para Editar Tarefa -->
                <a href="{{ url_for('editar_tarefa', tarefa_id=tarefa.id) }}" class="btn btn-sm btn-secondary">Editar</a>
            </div>
        </li>
        {% else %}
        <li class="list-group-item text-muted">Nenhuma tarefa pendente.</li>
        {% endfor %}
    </ul>

    <!-- Tarefas em Andamento -->
    <h4 class="mt-3">Tarefas em Andamento</h4>
    <ul class="list-group">
        {% for tarefa in page.andamento %}
        <li class="list-group-item">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <strong>{{ tarefa.nome }}</strong> 
                    <span class="text-muted">(Prazo: {{ tarefa.prazo }})</span>
                    <p>{{ tarefa.descricao }}</p>
                </div>
                <!-- Botão para Editar Tarefa -->
                <a href="{{ url_for('editar_tarefa', tarefa_id=tarefa.id) }}" class="btn btn-sm btn-secondary">Editar</a>
            </div>
        </li>
        {% else %}
        <li class="list-group-item text-muted">Nenhuma tarefa em andamento.</li>
        {% endfor %}
    </ul>

    <!-- Tarefas Concluídas -->
    <h4 class="mt-3">Tarefas Concluídas</h4>
    <ul class="list-group">
        {% for tarefa in page.concluidas %}
        <li class="list-group-item">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <strong>{{ tarefa.nome }}</strong> 
                    <span class="text-muted">(Prazo: {{ tarefa.prazo }})</span>
                    <p>{{ tarefa.descricao }}</p>
                </div>
                <!-- Botão para Editar Tarefa -->
                <a href="{{ url_for('editar_tarefa', tarefa_id=tarefa.id) }}" class="btn btn-sm btn-secondary">Editar</a>
            </div>
        </li>
        {% else %}
        <li class="list-group-item text-muted">Nenhuma tarefa concluída.</li>
        {% endfor %}
    </ul>

    <!-- Equipe do Projeto -->
    <h3 class="mt-4">Equipe do Projeto</h3>
    <ul class="list-group">
        {% for membro in page.membros %}
        <li class="list-group-item">
            {{ membro.nome }} 
            <span class="text-muted">({{ membro.email }})</span>
        </li>
        {% else %}
        <li class="list-group-item text-muted">Nenhum membro atribuído.</li>
        {% endfor %}
    </ul>
</div>
{% endblock %}
